<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plan: Add Default World Examples to World Creation UI</title>
    <style>
        /* ===== CSS VARIABLES ===== */
        :root {
            /* Chinese Color Palette - Light Mode */
            --chinese-red: #8B0000;
            --chinese-gold: #FFD700;
            --jade-green: #00A86B;
            --ink-black: #2B2B2B;
            --paper-beige: #F5F5DC;
            --light-cream: #FAFAF0;

            /* Hierarchy Levels */
            --level-1: #000;
            --level-2: #333;
            --level-3: #666;
            --level-4: #999;
        }

        [data-theme="dark"] {
            /* Chinese Color Palette - Dark Mode */
            --chinese-red: #DC143C;
            --chinese-gold: #FFD700;
            --jade-green: #10B981;
            --ink-black: #E5E5DC;
            --paper-beige: #1A1A1A;
            --light-cream: #252525;

            /* Hierarchy Levels - Dark Mode */
            --level-1: #F5F5DC;
            --level-2: #D4C4B0;
            --level-3: #A89F91;
            --level-4: #6B6B6B;
        }

        /* ===== BASE STYLES ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            margin: 0;
            padding: 0;
            width: 100%;
            overflow-x: hidden;
        }

        body {
            background: linear-gradient(135deg, var(--paper-beige) 0%, var(--light-cream) 100%);
            color: var(--ink-black);
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
            font-size: 14px;
            line-height: 1.2;
        }

        .container {
            width: 100%;
            padding: 2px;
            margin: 0;
        }

        /* ===== TYPOGRAPHY ===== */
        h1 {
            font-size: 24px;
            font-weight: 900;
            margin: 4px 0;
            padding: 6px 4px;
            background: linear-gradient(135deg, var(--chinese-red), #CD5C5C);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            letter-spacing: -0.5px;
        }

        h2 {
            font-size: 18px;
            font-weight: 700;
            margin: 8px 0 4px 0;
            padding: 4px;
            border-left: 4px solid var(--chinese-red);
            background: rgba(139, 0, 0, 0.03);
            color: var(--level-1);
        }

        h3 {
            font-size: 14px;
            font-weight: 600;
            margin: 4px 0 2px 8px;
            color: var(--level-2);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        h4 {
            font-size: 12px;
            font-weight: 500;
            margin: 2px 0 1px 16px;
            color: var(--level-3);
        }

        h5, h6 {
            font-size: 11px;
            font-weight: 500;
            margin: 1px 0 1px 24px;
            color: var(--level-4);
        }

        /* ===== LAYOUT SYSTEMS ===== */
        .two-column-layout {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
            width: 100%;
        }

        .two-column-layout.uneven {
            grid-template-columns: 2fr 1fr;
        }

        .two-column-layout.reverse-uneven {
            grid-template-columns: 1fr 2fr;
        }

        .dense-columns {
            column-count: 2;
            column-gap: 8px;
            column-fill: balance;
        }

        .compact-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 4px;
            width: 100%;
        }

        /* ===== SECTIONS & CONTAINERS ===== */
        .primary-section {
            border: 2px solid var(--chinese-red);
            background: white;
            margin: 6px 0;
            padding: 6px;
        }

        .secondary-section {
            border-left: 3px solid var(--chinese-gold);
            background: rgba(255, 215, 0, 0.05);
            margin: 4px 0 4px 8px;
            padding: 4px;
        }

        .tertiary-section {
            margin-left: 16px;
            padding-left: 8px;
            border-left: 1px dashed #ccc;
        }

        .card {
            background: white;
            border: 1px solid rgba(139, 0, 0, 0.2);
            border-radius: 2px;
            padding: 6px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .card.priority {
            border: 2px solid var(--chinese-gold);
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.05), white);
        }

        .important-always-visible {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), white);
            border: 2px solid var(--chinese-gold);
            padding: 8px;
            margin: 8px 0;
            border-radius: 3px;
        }

        .important-always-visible h2 {
            color: var(--chinese-red);
            margin-top: 0;
        }

        /* ===== COLLAPSIBLES ===== */
        .collapsible {
            margin: 4px 0;
            width: 100%;
        }

        .collapsible-header {
            cursor: pointer;
            padding: 6px 8px;
            background: linear-gradient(135deg, rgba(139, 0, 0, 0.05), rgba(255, 215, 0, 0.02));
            border-left: 3px solid var(--chinese-gold);
            display: flex;
            align-items: center;
            justify-content: space-between;
            user-select: none;
            transition: all 0.2s ease;
        }

        .collapsible-header:hover {
            background: linear-gradient(135deg, rgba(139, 0, 0, 0.1), rgba(255, 215, 0, 0.05));
        }

        .collapsible-header .arrow {
            display: inline-block;
            transition: transform 0.3s ease;
            color: var(--chinese-red);
            font-size: 10px;
        }

        .collapsible.open .arrow {
            transform: rotate(90deg);
        }

        .collapsible-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
            padding: 0 8px;
            margin-left: 12px;
        }

        .collapsible.open .collapsible-content {
            max-height: 5000px;
            padding: 8px;
        }

        .two-column-layout .collapsible {
            grid-column: span 1;
        }

        .two-column-layout .collapsible.full-width {
            grid-column: span 2;
        }

        .collapsible.critical .collapsible-header {
            border-left: 4px solid var(--chinese-red);
            background: rgba(139, 0, 0, 0.08);
            font-weight: 700;
        }

        .collapsible.secondary .collapsible-header {
            border-left: 2px solid #999;
            background: rgba(0, 0, 0, 0.02);
            font-size: 13px;
        }

        /* ===== LISTS ===== */
        .dense-list {
            list-style: none;
            padding: 0;
            margin-left: 8px;
        }

        .dense-list li {
            padding: 2px 0 2px 12px;
            border-left: 2px solid transparent;
            position: relative;
        }

        .dense-list li:before {
            content: "‚ñ∏";
            position: absolute;
            left: 0;
            color: var(--chinese-red);
            font-size: 10px;
        }

        .dense-list li strong {
            color: var(--level-2);
            font-weight: 600;
        }

        /* ===== CODE BLOCKS ===== */
        code {
            background: linear-gradient(135deg, rgba(245, 245, 220, 0.3), rgba(255, 255, 255, 0.5));
            border: 1px solid rgba(139, 0, 0, 0.1);
            padding: 2px 4px;
            margin: 0 1px;
            font-family: 'Monaco', 'Menlo', 'Consolas', 'Courier New', monospace;
            font-size: 12px;
            line-height: 1.1;
            border-radius: 2px;
        }

        pre {
            background: linear-gradient(135deg, rgba(245, 245, 220, 0.3), rgba(255, 255, 255, 0.5));
            border: 1px solid rgba(139, 0, 0, 0.1);
            padding: 6px 8px;
            margin: 4px 0;
            font-family: 'Monaco', 'Menlo', 'Consolas', 'Courier New', monospace;
            font-size: 12px;
            line-height: 1.4;
            white-space: pre-wrap;
            word-wrap: break-word;
            overflow-x: auto;
            tab-size: 4;
            -moz-tab-size: 4;
            border-radius: 3px;
        }

        pre code {
            background: none;
            border: none;
            padding: 0;
            margin: 0;
            font-size: inherit;
            line-height: inherit;
            white-space: inherit;
        }

        /* ===== TABLES ===== */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 4px 0;
            font-size: 12px;
        }

        th {
            background: var(--chinese-red);
            color: white;
            font-weight: 600;
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            padding: 3px 6px;
        }

        td {
            border: 1px solid #ddd;
            padding: 3px 6px;
            text-align: left;
        }

        tr:nth-child(even) {
            background: rgba(0,0,0,0.02);
        }

        td:first-child {
            font-weight: 600;
            color: var(--level-2);
        }

        /* ===== BUTTONS ===== */
        button, .button {
            background: linear-gradient(135deg, var(--chinese-red), #CD5C5C);
            color: white;
            border: 1px solid rgba(255, 215, 0, 0.3);
            transition: all 0.2s ease;
            padding: 2px 6px;
            margin: 1px;
            font-size: 12px;
            line-height: 1.1;
            cursor: pointer;
        }

        button:hover {
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(139, 0, 0, 0.3);
            border-color: var(--chinese-gold);
        }

        #theme-toggle {
            position: fixed;
            top: 8px;
            right: 8px;
            z-index: 10000;
            background: var(--chinese-gold);
            color: var(--ink-black);
            border: 2px solid var(--chinese-red);
            padding: 4px 10px;
            cursor: pointer;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 700;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
            transition: all 0.2s ease;
        }

        #theme-toggle:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        }

        /* ===== UTILITY CLASSES ===== */
        .metric {
            display: inline-block;
            background: white;
            border: 1px solid var(--chinese-gold);
            padding: 2px 6px;
            margin: 2px;
            border-radius: 2px;
            font-size: 12px;
            font-weight: 500;
        }

        .metric.important {
            background: var(--chinese-gold);
            color: white;
            font-weight: 700;
        }

        .critical { color: var(--chinese-red); font-weight: 700; }
        .success { color: var(--jade-green); font-weight: 600; }
        .warning { color: var(--chinese-gold); font-weight: 600; }
        .muted { color: var(--level-4); font-size: 11px; }
        .highlight { background: rgba(255, 215, 0, 0.2); padding: 1px 2px; }

        .indent-1 { margin-left: 12px; }
        .indent-2 { margin-left: 24px; }
        .indent-3 { margin-left: 36px; }

        .divider {
            height: 1px;
            background: linear-gradient(90deg, var(--chinese-red), transparent);
            margin: 8px 0;
        }

        blockquote {
            margin: 2px 0;
            padding: 2px 8px;
            border-left: 2px solid var(--chinese-red);
        }

        hr {
            margin: 2px 0;
            border: none;
            height: 1px;
            background: var(--chinese-red);
        }

        /* ===== DARK MODE OVERRIDES ===== */
        [data-theme="dark"] code {
            background: rgba(40, 40, 40, 0.8);
            border-color: #555;
            color: #e0e0e0;
        }

        [data-theme="dark"] pre {
            background: rgba(30, 30, 30, 0.9);
            border-color: #555;
            color: #e0e0e0;
        }

        [data-theme="dark"] .requirement,
        [data-theme="dark"] .feature-list li,
        [data-theme="dark"] .column,
        [data-theme="dark"] .metric,
        [data-theme="dark"] td {
            background: var(--light-cream);
            color: var(--ink-black);
        }

        [data-theme="dark"] .secondary-section {
            background: rgba(255, 215, 0, 0.08);
        }

        [data-theme="dark"] td {
            border-color: #444;
        }

        [data-theme="dark"] tr:nth-child(even) td {
            background: rgba(255, 215, 0, 0.05);
        }

        [data-theme="dark"] th {
            background: rgba(220, 20, 60, 0.1);
        }

        /* ===== MERMAID DIAGRAM STYLING ===== */
        .diagram-container {
            background: white;
            border: 1px solid #D1D5DB;
            border-radius: 6px;
            padding: 16px;
            margin: 16px 0;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            transition: background 0.3s ease, border-color 0.3s ease;
        }

        .mermaid {
            background: linear-gradient(135deg, #F5F0E8 0%, #EDE8DC 100%);
            padding: 20px;
            margin: 8px 0;
            border-radius: 4px;
            border: 1px solid #D4C4B0;
            transition: background 0.3s ease, border-color 0.3s ease;
        }

        [data-theme="dark"] .diagram-container {
            background: #2a2a2a;
            border-color: #444;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
        }

        [data-theme="dark"] .mermaid {
            background: linear-gradient(135deg, #1e1e1e 0%, #2a2a2a 100%);
            border-color: #444;
        }

        /* ===== PEDAGOGICAL STYLES (PLAN-SPECIFIC) ===== */
        .difficulty-badge {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.85em;
            font-weight: bold;
            margin-right: 8px;
        }

        .difficulty-badge.easy {
            background: #4caf50;
            color: white;
        }

        .difficulty-badge.medium {
            background: #ff9800;
            color: white;
        }

        .difficulty-badge.hard {
            background: #f44336;
            color: white;
        }

        .concept-tag {
            background: #e8f5e9;
            border-left: 3px solid #4caf50;
            padding: 6px 10px;
            margin: 6px 0;
            font-size: 0.9em;
            font-style: italic;
        }

        .rationale-box {
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 12px;
            margin: 10px 0;
            border-radius: 4px;
        }

        .warning-box {
            background: #fff3e0;
            border-left: 4px solid #ff9800;
            padding: 12px;
            margin: 10px 0;
            border-radius: 4px;
        }

        .pitfall-box {
            background: #ffebee;
            border: 1px solid #ef5350;
            padding: 10px;
            margin: 8px 0;
            border-radius: 4px;
        }

        .pitfall-box summary {
            cursor: pointer;
            font-weight: 600;
            color: var(--chinese-red);
        }

        .verification {
            background: #f1f8f4;
            border-left: 3px solid #66bb6a;
            padding: 8px;
            margin: 8px 0;
            font-size: 0.9em;
        }

        .concept-card {
            background: #fafafa;
            border: 1px solid #e0e0e0;
            border-radius: 6px;
            padding: 14px;
            margin: 12px 0;
        }

        .concept-card h4 {
            margin-top: 0;
            color: #1976d2;
        }

        .architecture-diagram {
            background: #f5f5f5;
            border: 1px solid #ccc;
            padding: 16px;
            font-family: monospace;
            white-space: pre;
            overflow-x: auto;
            margin: 12px 0;
        }

        /* Dark mode support for pedagogical elements */
        [data-theme="dark"] .concept-tag {
            background: #1f3d2a;
            border-color: #66bb6a;
            color: #e0e0e0;
        }

        [data-theme="dark"] .architecture-diagram {
            background: #2a2a2a;
            border-color: #444;
            color: #e0e0e0;
        }

        [data-theme="dark"] .concept-card {
            background: #2a2a2a;
            border-color: #444;
            color: #e0e0e0;
        }

        [data-theme="dark"] .rationale-box {
            background: #1e3a5f;
            border-color: #2196f3;
            color: #e0e0e0;
        }

        [data-theme="dark"] .warning-box {
            background: #3d2e1f;
            border-color: #ff9800;
            color: #e0e0e0;
        }

        [data-theme="dark"] .pitfall-box {
            background: #3d1f1f;
            border-color: #ef5350;
            color: #e0e0e0;
        }

        [data-theme="dark"] .verification {
            background: #1f3d2a;
            border-color: #66bb6a;
            color: #e0e0e0;
        }

        /* ===== RESPONSIVE ===== */
        @media (max-width: 1200px) {
            .dense-columns { column-count: 2; }
        }

        @media (max-width: 800px) {
            .dense-columns { column-count: 1; }
            .two-column-layout,
            .two-column-layout.uneven,
            .two-column-layout.reverse-uneven {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <button id="theme-toggle">üåô Dark</button>

    <div class="container">
        <!-- Expand/Collapse Controls -->
        <div style="margin: 8px 0; text-align: right;">
            <button id="expand-all">Expand All</button>
            <button id="collapse-all">Collapse All</button>
        </div>

        <!-- ===== CONTENT ===== -->

        <h1>üìã Plan: Add Default World Examples to World Creation UI</h1>

        <!-- HIGH-LEVEL OVERVIEW (Always Visible) -->
        <div class="important-always-visible">
            <h2>üèóÔ∏è High-Level Overview</h2>

            <div class="diagram-container">
                <div class="mermaid">
graph LR
    A[User on WorldCreation Page] --> B{Sees Example Worlds}
    B --> C[Clicks Example World Button]
    C --> D[Textarea Fills with Description]
    D --> E{User Action}
    E -->|Edit| F[User Modifies Text]
    E -->|Submit| G[Direct Submit]
    F --> G
    G --> H[createWorld API Call]
    H --> I[World Generated]
                </div>
            </div>

            <p><strong>System Summary:</strong> Add clickable example world descriptions to WorldCreation component, mirroring the pattern in AgentCreation's "Example Pokemons" section. Reuses existing Pokemon-themed UI components for visual consistency.</p>

            <p><strong>Key Components:</strong></p>
            <ul class="dense-list">
                <li>WorldCreation.jsx (single file modification)</li>
                <li>4 default world examples as const array</li>
                <li>Grid layout (grid-cols-1 md:grid-cols-2)</li>
                <li>Existing CSS classes (pokemon-green theme)</li>
            </ul>

            <p><strong>Data Flow:</strong> User clicks example ‚Üí setDescription(example) ‚Üí textarea updates ‚Üí (optional user edit) ‚Üí form submit ‚Üí createWorld API ‚Üí WorldCanvas render</p>
        </div>

        <!-- EXECUTIVE SUMMARY (Always Visible) -->
        <div class="important-always-visible">
            <h2>üìä Executive Summary</h2>

            <p><strong class="critical">Problem Statement:</strong> WorldCreation lacks the helpful example prompts that AgentCreation has. Users must write descriptions from scratch, creating inconsistent UX and higher friction for new users.</p>

            <p><strong class="success">Proposed Solution:</strong> Add styled grid of 4 clickable example world descriptions below the textarea, matching AgentCreation's pattern (lines 219-246). Examples thematically correspond to default agent examples for cohesive experience.</p>

            <p><strong>Key Technical Decisions:</strong></p>
            <table>
                <tr>
                    <th>Decision</th>
                    <th>Rationale</th>
                </tr>
                <tr>
                    <td>Reuse AgentCreation pattern</td>
                    <td>Proven UX, visual consistency, familiar code structure</td>
                </tr>
                <tr>
                    <td>Position after form (line 94)</td>
                    <td class="critical">CORRECTED: Initially planned after line 105 (incorrect - inside conditional)</td>
                </tr>
                <tr>
                    <td>Extract to EXAMPLE_WORLDS const</td>
                    <td>Maintainability, testability, future i18n support</td>
                </tr>
                <tr>
                    <td>pokemon-green/20 theme</td>
                    <td>Matches AgentCreation's green theme, aligns with "Create World" button aesthetic</td>
                </tr>
            </table>

            <p><strong>Estimated Complexity:</strong> <span class="difficulty-badge easy">Easy</span> ~30 lines of code, single file change, no new dependencies, 30-45 min implementation</p>

            <p><strong>Dependencies:</strong> None - all CSS classes and UI patterns already exist in codebase</p>
        </div>

        <!-- REVIEW SUMMARY (Always Visible) -->
        <div class="important-always-visible">
            <h2>üîç Plan Review Summary</h2>

            <p><strong>Review Method:</strong> Task agent critical analysis (Codex MCP unavailable)</p>

            <div class="warning-box">
                <h3>‚ö†Ô∏è Critical Issues Fixed</h3>
                <ul class="dense-list">
                    <li><strong class="critical">Insertion Point Error:</strong> Original plan said "after line 105" which is inside loading conditional. <strong>Corrected to line 94</strong> (after form closing tag)</li>
                    <li><strong>Missing Error Handling:</strong> Added <code>setError(null)</code> on example click</li>
                    <li><strong>UX Overwrite Issue:</strong> Added confirmation dialog when overwriting non-empty textarea</li>
                </ul>
            </div>

            <div class="rationale-box">
                <h3>‚ú® Improvements Made</h3>
                <ul class="dense-list">
                    <li><strong>Thematic Coherence:</strong> Changed examples to directly match agent examples (robot‚Üícave, owl‚Üílibrary, cat‚Üívillage, knight‚Üíforest)</li>
                    <li><strong>Accessibility:</strong> Added ARIA labels, role="region", keyboard nav notes</li>
                    <li><strong>Code Quality:</strong> Extract examples to file-level constant for maintainability</li>
                </ul>
            </div>

            <p><strong>Risks Accepted:</strong> User accidentally overwriting text (mitigated with confirmation), generic examples might not perfectly match all future agents (acceptable tradeoff for simplicity)</p>
        </div>

        <!-- IMPLEMENTATION STEPS (Always Visible) -->
        <div class="primary-section">
            <h2>üî® Step-by-Step Implementation</h2>

            <ol style="margin-left: 20px; margin-top: 8px;">
                <li style="margin-bottom: 12px;">
                    <strong>Step 1: Add EXAMPLE_WORLDS constant</strong> (WorldCreation.jsx, after imports, before component)

                    <div class="indent-1">
                        <p class="muted">File: frontend/src/components/WorldCreation.jsx:6</p>
                    </div>

                    <pre><code>const EXAMPLE_WORLDS = [
  "A sparkling crystal cave filled with colorful gems, mysterious passages, and glowing rock formations",
  "An ancient library tower with moving bookshelves, riddles carved in stone, and hidden chambers",
  "A cozy village where items mysteriously disappear and reappear, with friendly neighbors and a magic fountain",
  "An enchanted forest with creatures to help, glowing mushrooms, hidden paths, and magical springs"
]</code></pre>

                    <div class="concept-tag">
                        üí° <strong>Thematic Matching:</strong> These worlds directly correspond to the 4 default agents: robot (cave), owl (library), cat (village), knight (forest)
                    </div>
                </li>

                <li style="margin-bottom: 12px;">
                    <strong>Step 2: Add handleExampleClick function</strong> (inside WorldCreation component, after handleCreateWorld)

                    <pre><code>const handleExampleClick = (example) => {
  // Confirm before overwriting existing text
  if (description.trim() && !window.confirm('Replace your current description?')) {
    return
  }
  setDescription(example)
  setError(null) // Clear any existing errors
}</code></pre>

                    <div class="rationale-box">
                        <strong>Why this approach:</strong> Prevents accidental overwrites while keeping UX simple. window.confirm is acceptable for this low-frequency action (vs. building custom modal).
                    </div>
                </li>

                <li style="margin-bottom: 12px;">
                    <strong>Step 3: Add examples UI section</strong> (after closing <code>&lt;/form&gt;</code> tag at line 94)

                    <div class="indent-1">
                        <p class="muted">File: frontend/src/components/WorldCreation.jsx:94</p>
                    </div>

                    <pre><code>{/* Example worlds */}
&lt;div className="mt-12 p-6 bg-pokemon-green/20 border-2 border-pokemon-green rounded"
     role="region"
     aria-label="Example world descriptions"&gt;
  &lt;p className="font-pixel text-sm text-pokemon-green mb-4 text-center"&gt;
    ‚ú® Example Worlds - Click to try!
  &lt;/p&gt;
  &lt;div className="grid grid-cols-1 md:grid-cols-2 gap-3"&gt;
    {EXAMPLE_WORLDS.map((example, i) =&gt; (
      &lt;button
        key={i}
        type="button"
        onClick={() =&gt; handleExampleClick(example)}
        className="text-left px-4 py-3 hover:bg-pokemon-cream hover:scale-105
                 text-xs border-2 border-pokemon-green transition-all
                 font-sans rounded"
        style={{
          backgroundColor: 'var(--bg-card)',
          color: 'var(--text-primary)'
        }}
        disabled={loading}
        aria-label={`Use example world: ${example.slice(0, 50)}...`}
      &gt;
        {example}
      &lt;/button&gt;
    ))}
  &lt;/div&gt;
&lt;/div&gt;</code></pre>

                    <div class="warning-box">
                        <strong>‚ö†Ô∏è Critical:</strong> Must be placed AFTER <code>&lt;/form&gt;</code> (line 94) and BEFORE loading indicator (line 96). Do NOT place after line 105 as originally planned - that's inside the loading conditional block!
                    </div>

                    <div class="indent-1">
                        <p><strong>Key attributes:</strong></p>
                        <ul class="dense-list">
                            <li><code>type="button"</code> - prevents form submission</li>
                            <li><code>disabled={loading}</code> - prevents clicks during world generation</li>
                            <li><code>aria-label</code> - accessibility for screen readers</li>
                            <li><code>role="region"</code> - semantic landmark for assistive tech</li>
                        </ul>
                    </div>
                </li>

                <li style="margin-bottom: 12px;">
                    <strong>Step 4: Manual Testing</strong>

                    <div class="verification">
                        <strong>‚úì Test Checklist:</strong>
                        <ul style="margin-left: 20px; margin-top: 4px;">
                            <li>Click each of 4 examples ‚Üí textarea fills correctly</li>
                            <li>Click example on empty textarea ‚Üí no confirmation dialog</li>
                            <li>Type text ‚Üí click example ‚Üí confirmation appears ‚Üí cancel preserves text</li>
                            <li>Type text ‚Üí click example ‚Üí confirm replaces text</li>
                            <li>Click example ‚Üí submit immediately (no edits) ‚Üí world creates successfully</li>
                            <li>Trigger error state ‚Üí click example ‚Üí error clears</li>
                            <li>Start world creation (loading) ‚Üí examples disabled</li>
                            <li>Responsive: Desktop 2-column grid, mobile 1-column stack</li>
                        </ul>
                    </div>
                </li>

                <li style="margin-bottom: 12px;">
                    <strong>Step 5: Visual Verification</strong>

                    <ul class="dense-list">
                        <li>Examples section uses pokemon-green/20 background (matches AgentCreation aesthetic)</li>
                        <li>Hover effects work (scale-105 transform, bg-pokemon-cream)</li>
                        <li>Text is readable in both light and dark themes (if applicable)</li>
                        <li>Layout doesn't break on mobile (&lt;768px width)</li>
                    </ul>
                </li>
            </ol>
        </div>

        <!-- PREREQUISITES & CONTEXT (Collapsible) -->
        <div data-collapsible="closed">
            <div class="collapsible-header">
                <span><strong>üìö Prerequisites & Context</strong></span>
                <span class="arrow">‚ñ∂</span>
            </div>
            <div class="collapsible-content">
                <h3>Files to Review</h3>
                <ul class="dense-list">
                    <li><code>frontend/src/components/WorldCreation.jsx</code> - Target file for modifications</li>
                    <li><code>frontend/src/components/AgentCreation.jsx:219-246</code> - Reference implementation pattern</li>
                    <li><code>frontend/src/index.css</code> - Pokemon theme CSS variables (pokemon-green, bg-card, etc.)</li>
                </ul>

                <h3>Existing Code Patterns</h3>
                <pre><code>// Pattern already used in AgentCreation.jsx
const examples = ["example 1", "example 2", ...]
&lt;button onClick={() =&gt; setDescription(example)}&gt;...&lt;/button&gt;</code></pre>

                <h3>CSS Classes Available</h3>
                <table>
                    <tr>
                        <th>Class</th>
                        <th>Purpose</th>
                    </tr>
                    <tr>
                        <td>bg-pokemon-green/20</td>
                        <td>Light green background (20% opacity)</td>
                    </tr>
                    <tr>
                        <td>border-pokemon-green</td>
                        <td>Green border color</td>
                    </tr>
                    <tr>
                        <td>text-pokemon-green</td>
                        <td>Green text color</td>
                    </tr>
                    <tr>
                        <td>hover:bg-pokemon-cream</td>
                        <td>Cream hover background</td>
                    </tr>
                    <tr>
                        <td>hover:scale-105</td>
                        <td>Slight scale-up on hover</td>
                    </tr>
                    <tr>
                        <td>font-pixel</td>
                        <td>Pokemon-style pixel font</td>
                    </tr>
                </table>

                <h3>Environment Setup</h3>
                <ul class="dense-list">
                    <li>Frontend dev server running: <code>npm run dev</code> in <code>frontend/</code></li>
                    <li>Browser at http://localhost:3000</li>
                    <li>Backend running (for actual world creation testing)</li>
                </ul>
            </div>
        </div>

        <!-- TESTING & VALIDATION (Collapsible) -->
        <div data-collapsible="closed">
            <div class="collapsible-header">
                <span><strong>üß™ Testing & Validation</strong></span>
                <span class="arrow">‚ñ∂</span>
            </div>
            <div class="collapsible-content">
                <h3>Unit Tests (Optional - Low Priority)</h3>
                <p class="muted">Since this is primarily UI presentation logic with no complex business logic, manual testing is sufficient. If adding tests:</p>

                <pre><code>// frontend/src/components/__tests__/WorldCreation.test.jsx
import { render, screen, fireEvent } from '@testing-library/react'
import WorldCreation from '../WorldCreation'

describe('WorldCreation Examples', () => {
  it('fills textarea when example is clicked', () => {
    render(&lt;WorldCreation agent={{ id: '123', name: 'TestAgent' }} /&gt;)
    const exampleBtn = screen.getByText(/sparkling crystal cave/i)
    fireEvent.click(exampleBtn)
    const textarea = screen.getByLabelText(/describe the world/i)
    expect(textarea.value).toContain('crystal cave')
  })

  it('shows confirmation when overwriting text', () => {
    window.confirm = jest.fn(() => false)
    render(&lt;WorldCreation agent={{ id: '123', name: 'TestAgent' }} /&gt;)
    const textarea = screen.getByRole('textbox')
    fireEvent.change(textarea, { target: { value: 'My custom world' } })
    const exampleBtn = screen.getByText(/library tower/i)
    fireEvent.click(exampleBtn)
    expect(window.confirm).toHaveBeenCalled()
    expect(textarea.value).toBe('My custom world') // Not replaced
  })

  it('disables examples during loading', () => {
    // Would need to trigger loading state - integration test better
  })
})</code></pre>

                <h3>Integration Tests</h3>
                <ol style="margin-left: 20px;">
                    <li><strong>Full Flow:</strong> Agent creation ‚Üí world creation with example ‚Üí verify world appears in canvas</li>
                    <li><strong>Error Recovery:</strong> Trigger error ‚Üí click example ‚Üí error clears ‚Üí submit works</li>
                    <li><strong>State Persistence:</strong> Click example ‚Üí navigate away ‚Üí back button ‚Üí verify state</li>
                </ol>

                <h3>Expected Outcomes</h3>
                <table>
                    <tr>
                        <th>Test Case</th>
                        <th>Expected Result</th>
                    </tr>
                    <tr>
                        <td>Click example (empty textarea)</td>
                        <td>Textarea fills, no confirmation</td>
                    </tr>
                    <tr>
                        <td>Click example (has text) ‚Üí Cancel</td>
                        <td>Original text preserved</td>
                    </tr>
                    <tr>
                        <td>Click example (has text) ‚Üí OK</td>
                        <td>Text replaced with example</td>
                    </tr>
                    <tr>
                        <td>Submit example world</td>
                        <td>World created successfully</td>
                    </tr>
                    <tr>
                        <td>Click during loading</td>
                        <td>Button disabled, no action</td>
                    </tr>
                </table>

                <h3>Common Test Failures & Debugging</h3>
                <div class="pitfall-box">
                    <details>
                        <summary>‚ùå Examples not visible</summary>
                        <ul class="dense-list" style="margin-top: 8px;">
                            <li>Check insertion point - must be after <code>&lt;/form&gt;</code> line 94</li>
                            <li>Verify not inside conditional block</li>
                            <li>Check CSS classes exist in index.css</li>
                        </ul>
                    </details>
                </div>

                <div class="pitfall-box">
                    <details>
                        <summary>‚ùå Clicking example doesn't fill textarea</summary>
                        <ul class="dense-list" style="margin-top: 8px;">
                            <li>Check <code>onClick={() =&gt; handleExampleClick(example)}</code> syntax</li>
                            <li>Verify handleExampleClick is defined</li>
                            <li>Check browser console for errors</li>
                        </ul>
                    </details>
                </div>

                <div class="pitfall-box">
                    <details>
                        <summary>‚ùå Clicking example submits the form</summary>
                        <ul class="dense-list" style="margin-top: 8px;">
                            <li>Ensure <code>type="button"</code> attribute on example buttons</li>
                            <li>Default button type is "submit" when inside form - must be explicit</li>
                        </ul>
                    </details>
                </div>
            </div>
        </div>

        <!-- POTENTIAL ISSUES & MITIGATIONS (Collapsible) -->
        <div data-collapsible="closed">
            <div class="collapsible-header">
                <span><strong>‚ö†Ô∏è Potential Issues & Mitigations</strong></span>
                <span class="arrow">‚ñ∂</span>
            </div>
            <div class="collapsible-content">
                <table>
                    <tr>
                        <th>Issue</th>
                        <th>Likelihood</th>
                        <th>Mitigation</th>
                    </tr>
                    <tr>
                        <td>Examples don't match all agent types</td>
                        <td class="warning">Medium</td>
                        <td>Keep examples generic enough to work universally. Future: agent-specific examples based on agent.personality_traits</td>
                    </tr>
                    <tr>
                        <td>User overwrites custom description accidentally</td>
                        <td class="warning">Medium</td>
                        <td>Confirmation dialog when textarea is non-empty</td>
                    </tr>
                    <tr>
                        <td>Examples section breaks mobile layout</td>
                        <td class="success">Low</td>
                        <td>Using responsive grid (md:grid-cols-2 ‚Üí grid-cols-1). Test on 375px width</td>
                    </tr>
                    <tr>
                        <td>Loading state doesn't disable examples</td>
                        <td class="success">Low</td>
                        <td>Added <code>disabled={loading}</code> attribute</td>
                    </tr>
                    <tr>
                        <td>CSS classes missing in production build</td>
                        <td class="success">Very Low</td>
                        <td>Classes already used in AgentCreation - confirmed working</td>
                    </tr>
                    <tr>
                        <td>Accessibility issues for screen readers</td>
                        <td class="success">Low</td>
                        <td>Added aria-label, role="region", semantic HTML</td>
                    </tr>
                </table>

                <h3>Edge Cases</h3>
                <ul class="dense-list">
                    <li><strong>Rapid clicking:</strong> Disabled during loading prevents multiple submissions</li>
                    <li><strong>Very long example text:</strong> Current examples ~80-100 chars, tested to fit in button layout</li>
                    <li><strong>Copy-paste example:</strong> User can still manually copy example text - acceptable</li>
                    <li><strong>Browser back button after example click:</strong> Standard React state behavior - no special handling needed</li>
                </ul>

                <h3>Performance Considerations</h3>
                <p class="muted">No performance concerns - static array of 4 strings, simple map/render, no API calls, no heavy computations.</p>

                <h3>Security Considerations</h3>
                <p class="success">‚úì No security issues - examples are hardcoded strings, no user input, no XSS vectors, no injection risks.</p>
            </div>
        </div>

        <!-- POST-IMPLEMENTATION (Collapsible) -->
        <div data-collapsible="closed">
            <div class="collapsible-header">
                <span><strong>üìù Post-Implementation</strong></span>
                <span class="arrow">‚ñ∂</span>
            </div>
            <div class="collapsible-content">
                <h3>Documentation Updates</h3>
                <ul class="dense-list">
                    <li>No formal docs needed - feature is self-explanatory in UI</li>
                    <li>Optional: Add comment in code explaining thematic matching:
                        <pre><code>// Example worlds are thematically matched to default agents:
// 1. Crystal cave ‚Üí Robot (gem collector)
// 2. Library tower ‚Üí Owl (puzzle solver)
// 3. Village ‚Üí Cat (lost item finder)
// 4. Enchanted forest ‚Üí Knight (protector)</code></pre>
                    </li>
                </ul>

                <h3>Follow-Up Tasks</h3>
                <ol style="margin-left: 20px;">
                    <li class="muted"><strong>Low Priority:</strong> Extract AgentCreation examples to const (for consistency)</li>
                    <li class="muted"><strong>Future Enhancement:</strong> Dynamic examples based on agent personality
                        <pre><code>// Pseudocode
const generateExamplesForAgent = (agent) => {
  if (agent.personality_traits.includes('brave')) {
    return [...forestWorlds]
  } else if (agent.personality_traits.includes('curious')) {
    return [...explorationWorlds]
  }
  return EXAMPLE_WORLDS // fallback
}</code></pre>
                    </li>
                    <li class="muted"><strong>Future Enhancement:</strong> Internationalization (i18n) support for examples</li>
                </ol>

                <h3>Monitoring / Observability</h3>
                <p class="muted">No monitoring needed - purely UI feature. Optional: Add analytics event for example clicks if product analytics exist.</p>

                <h3>Maintenance Considerations</h3>
                <ul class="dense-list">
                    <li>Update EXAMPLE_WORLDS array when new default agents are added</li>
                    <li>Keep examples 50-120 characters for optimal button layout</li>
                    <li>If adding more than 4 examples, consider pagination or "Show more" button</li>
                </ul>
            </div>
        </div>

    </div>

    <!-- Mermaid.js -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.min.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // ===== DARK MODE SETUP =====
            const savedTheme = localStorage.getItem('theme') || 'light';
            document.documentElement.setAttribute('data-theme', savedTheme);

            const themeToggle = document.getElementById('theme-toggle');
            if (themeToggle) {
                themeToggle.textContent = savedTheme === 'dark' ? '‚òÄÔ∏è Light' : 'üåô Dark';
                themeToggle.addEventListener('click', function() {
                    const currentTheme = document.documentElement.getAttribute('data-theme');
                    const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
                    document.documentElement.setAttribute('data-theme', newTheme);
                    localStorage.setItem('theme', newTheme);
                    this.textContent = newTheme === 'dark' ? '‚òÄÔ∏è Light' : 'üåô Dark';
                });
            }

            // ===== MERMAID SETUP =====
            const currentTheme = localStorage.getItem('theme') || 'light';

            mermaid.initialize({
                startOnLoad: true,
                theme: currentTheme === 'dark' ? 'dark' : 'base',
                themeVariables: currentTheme === 'dark' ? {
                    background: '#1e1e1e',
                    primaryColor: '#bb86fc',
                    primaryTextColor: '#e0e0e0',
                    primaryBorderColor: '#bb86fc',
                    lineColor: '#888',
                    secondaryColor: '#03dac6',
                    tertiaryColor: '#cf6679',
                    mainBkg: '#2a2a2a',
                    textColor: '#e0e0e0',
                    nodeBorder: '#888',
                    actorBkg: '#3a3a3a',
                    actorBorder: '#888',
                    actorTextColor: '#e0e0e0',
                    signalColor: '#e0e0e0',
                    signalTextColor: '#e0e0e0',
                    labelBoxBkgColor: '#bb86fc',
                    labelTextColor: '#000',
                    noteBkgColor: '#3a3a3a',
                    noteTextColor: '#e0e0e0',
                    noteBorderColor: '#888',
                    fontSize: '14px',
                    fontFamily: '-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif'
                } : {
                    background: '#F5F0E8',
                    primaryColor: '#7A1712',
                    primaryTextColor: '#1a1a1a',
                    primaryBorderColor: '#6B4423',
                    lineColor: '#4A5568',
                    secondaryColor: '#1B3A57',
                    tertiaryColor: '#2D5016',
                    mainBkg: '#EDE8DC',
                    textColor: '#1a1a1a',
                    nodeBorder: '#6B4423',
                    actorBkg: '#D4C4B0',
                    actorBorder: '#6B4423',
                    actorTextColor: '#1a1a1a',
                    actorLineColor: '#6B4423',
                    signalColor: '#1a1a1a',
                    signalTextColor: '#1a1a1a',
                    labelBoxBkgColor: '#7A1712',
                    labelBoxBorderColor: '#6B4423',
                    labelTextColor: '#fff',
                    loopTextColor: '#1a1a1a',
                    noteBkgColor: '#FEF3C7',
                    noteTextColor: '#6B4423',
                    noteBorderColor: '#D97706',
                    activationBorderColor: '#6B4423',
                    activationBkgColor: '#D4C4B0',
                    labelColor: '#1a1a1a',
                    classText: '#1a1a1a',
                    fontSize: '14px',
                    fontFamily: '-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif'
                },
                flowchart: {
                    curve: 'basis',
                    padding: 20,
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    actorMargin: 50,
                    diagramMarginX: 8,
                    diagramMarginY: 8,
                    useMaxWidth: true
                }
            });

            // ===== COLLAPSIBLES SETUP =====
            document.querySelectorAll('[data-collapsible]').forEach(function(section) {
                const isOpen = section.getAttribute('data-collapsible') === 'open';
                section.classList.add('collapsible');
                if (isOpen) section.classList.add('open');
            });

            document.querySelectorAll('.collapsible-header').forEach(function(header) {
                header.addEventListener('click', function() {
                    const collapsible = this.closest('.collapsible');
                    collapsible.classList.toggle('open');
                });
            });

            // ===== EXPAND/COLLAPSE ALL =====
            const expandAllBtn = document.getElementById('expand-all');
            const collapseAllBtn = document.getElementById('collapse-all');

            if (expandAllBtn) {
                expandAllBtn.addEventListener('click', function() {
                    document.querySelectorAll('.collapsible').forEach(function(c) {
                        c.classList.add('open');
                    });
                });
            }

            if (collapseAllBtn) {
                collapseAllBtn.addEventListener('click', function() {
                    document.querySelectorAll('.collapsible').forEach(function(c) {
                        c.classList.remove('open');
                    });
                });
            }
        });
    </script>
</body>
</html>
